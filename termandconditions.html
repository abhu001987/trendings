<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Paccy Runner</title>
<style>
html,body{
    margin:0;
    padding:0;
    overflow:hidden;
    background:black;
    font-family:Arial;
}

#game{
    position:relative;
    width:100vw;
    height:100vh;
    overflow:hidden;
}

.bg{
    position:absolute;
    width:300%;
    height:100%;
    background:url('https://studymate81.wordpress.com/wp-content/uploads/2026/01/peccy-backgrudn.webp') repeat-x;
    background-size:contain;
}

#player{
    position:absolute;
    left:120px;
    bottom:60px;
    width:120px;
    z-index:5;
}

.obstacle{
    position:absolute;
    bottom:60px;
    width:100px;
}

.fly{ bottom:260px; }

#menu{
    position:absolute;
    inset:0;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    background:rgba(0,0,0,.6);
    color:white;
    z-index:10;
}

button{
    padding:12px 25px;
    font-size:18px;
    margin:8px;
    cursor:pointer;
}
</style>
</head>
<body>

<div id="game">
    <div class="bg" id="bg"></div>

    <img id="player" src="https://studymate81.wordpress.com/wp-content/uploads/2026/01/image_of_paccy_as_hero-removebg-preview.png">

    <div id="menu">
        <h1>Paccy Runner</h1>
        <button onclick="startGame()">â–¶ Play</button>
        <button onclick="toggleWASD()">ðŸŽ® Toggle WASD</button>
    </div>
</div>

<script>
const game = document.getElementById("game");
const player = document.getElementById("player");
const bg = document.getElementById("bg");
const menu = document.getElementById("menu");

let gravity = 1.1;
let velocity = 0;
let jumpCount = 0;
let alive = false;
let obstacles = [];
let gameSpeed = 4;
let speedTimer = 0;
let useWASD = false;
let playerX = 120;

function startGame(){
    menu.querySelector("button").remove(); // remove ONLY play button
    alive = true;
    loop();
    spawnLoop();
}

function toggleWASD(){
    useWASD = !useWASD;
    alert("WASD Controls: " + (useWASD ? "ON" : "OFF"));
}

function die(){
    alive = false;
    menu.innerHTML = `
        <h1>ðŸ’€ Game Over</h1>
        <button onclick="location.reload()">Restart</button>
    `;
    menu.style.display = "flex";
}

function jump(){
    if(jumpCount < 2){
        velocity = -18;
        jumpCount++;
    }
}

document.addEventListener("keydown",e=>{
    if(e.code==="Space") jump();

    if(useWASD){
        if(e.key==="w") jump();
        if(e.key==="s") velocity += 10;
        if(e.key==="a") playerX -= 20;
        if(e.key==="d") playerX += 20;
    }
});

document.addEventListener("click",jump);

function loop(){
    if(!alive) return;

    // SPEED PROGRESSION (Dino-style)
    speedTimer++;
    if(speedTimer % 300 === 0){
        gameSpeed += 0.3;
    }

    // background movement
    bg.style.left = (parseFloat(bg.style.left||0) - gameSpeed/2) + "px";

    // gravity
    velocity += gravity;
    let bottom = parseInt(player.style.bottom);
    bottom -= velocity;

    if(bottom <= 60){
        bottom = 60;
        velocity = 0;
        jumpCount = 0;
    }

    player.style.bottom = bottom+"px";
    playerX = Math.max(20,Math.min(window.innerWidth-150,playerX));
    player.style.left = playerX+"px";

    obstacles.forEach(o=>{
        o.x -= gameSpeed;
        o.style.left = o.x+"px";

        if(
            o.x < playerX+80 &&
            o.x > playerX-80 &&
            bottom < (o.fly?300:130)
        ){
            die();
        }
    });

    requestAnimationFrame(loop);
}

function spawnObstacle(src,fly=false){
    let o = document.createElement("img");
    o.src = src;
    o.className = "obstacle";
    o.fly = fly;
    if(fly) o.classList.add("fly");
    o.x = window.innerWidth;
    o.style.left = o.x+"px";
    game.appendChild(o);
    obstacles.push(o);
}

function spawnLoop(){
    if(!alive) return;

    let r = Math.random();
    if(r < .35)
        spawnObstacle("https://studymate81.wordpress.com/wp-content/uploads/2026/01/skeleton-walking_1.png");
    else if(r < .6)
        spawnObstacle("https://studymate81.wordpress.com/wp-content/uploads/2026/01/skeleton-fly_09.png",true);
    else if(r < .85)
        spawnObstacle("https://studymate81.wordpress.com/wp-content/uploads/2026/01/skeleton-get_hit_5.png");
    else
        spawnObstacle("https://studymate81.wordpress.com/wp-content/uploads/2026/01/skeleton-walking_2.png");

    setTimeout(spawnLoop,1200 / (gameSpeed/4));
}
</script>

</body>
</html>
