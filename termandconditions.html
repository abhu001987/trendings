<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Paccy Runner</title>
<style>
html,body{
    margin:0;
    padding:0;
    overflow:hidden;
    font-family:Arial, sans-serif;
    background:#000;
}
#game{
    position:relative;
    width:100vw;
    height:100vh;
    overflow:hidden;
}
.bg{
    position:absolute;
    top:0;
    width:200%;
    height:100%;
    background:url('https://studymate81.wordpress.com/wp-content/uploads/2026/01/peccy-backgrudn.webp') repeat-x;
    background-size:contain;
    animation:scroll 10s linear infinite;
}
@keyframes scroll{
    from{transform:translateX(0);}
    to{transform:translateX(-50%);}
}

#player{
    position:absolute;
    bottom:40px;
    left:100px;
    width:80px;
}

.obstacle{
    position:absolute;
    bottom:40px;
    width:70px;
}

.fly{
    bottom:200px;
}

#ui{
    position:absolute;
    inset:0;
    display:flex;
    justify-content:center;
    align-items:center;
    background:rgba(0,0,0,.6);
    color:white;
    flex-direction:column;
    z-index:10;
}
button{
    padding:15px 30px;
    font-size:20px;
    cursor:pointer;
}
.hidden{display:none;}
</style>
</head>
<body>

<div id="game">
    <div class="bg"></div>

    <img id="player" src="https://studymate81.wordpress.com/wp-content/uploads/2026/01/image_of_paccy_as_hero-removebg-preview.png">

    <div id="ui">
        <h1>Paccy Runner</h1>
        <button onclick="startGame()">â–¶ Play</button>
    </div>
</div>

<script>
const game = document.getElementById("game");
const player = document.getElementById("player");
const ui = document.getElementById("ui");

let gravity = 1.2;
let velocity = 0;
let jumping = false;
let jumpCount = 0;
let alive = false;
let obstacles = [];

function startGame(){
    ui.classList.add("hidden");
    alive = true;
    jumpCount = 0;
    obstacles.forEach(o=>o.remove());
    obstacles=[];
    requestAnimationFrame(loop);
    spawnLoop();
}

function die(){
    alive = false;
    ui.innerHTML = `
        <h1>ðŸ’€ You Died</h1>
        <button onclick="location.reload()">Restart</button>
    `;
    ui.classList.remove("hidden");
}

function jump(){
    if(jumpCount < 2){
        velocity = -18;
        jumpCount++;
    }
}

document.addEventListener("keydown",e=>{
    if(e.code==="Space") jump();
});
document.addEventListener("click",jump);

function loop(){
    if(!alive) return;

    velocity += gravity;
    let bottom = parseInt(getComputedStyle(player).bottom);
    bottom -= velocity;

    if(bottom <= 40){
        bottom = 40;
        velocity = 0;
        jumpCount = 0;
    }
    player.style.bottom = bottom+"px";

    obstacles.forEach(o=>{
        let ox = o.offsetLeft - 6;
        o.style.left = ox+"px";

        // collision
        if(
            ox < 160 && ox > 60 &&
            bottom < (o.classList.contains("fly") ? 220 : 100)
        ){
            die();
        }
    });

    requestAnimationFrame(loop);
}

function spawnObstacle(src, fly=false){
    let o = document.createElement("img");
    o.src = src;
    o.className = "obstacle"+(fly?" fly":"");
    o.style.left = window.innerWidth+"px";
    game.appendChild(o);
    obstacles.push(o);
}

function spawnLoop(){
    if(!alive) return;

    let r = Math.random();

    if(r < 0.4){
        spawnObstacle("https://studymate81.wordpress.com/wp-content/uploads/2026/01/skeleton-walking_1.png");
    }else if(r < 0.7){
        spawnObstacle("https://studymate81.wordpress.com/wp-content/uploads/2026/01/skeleton-fly_09.png",true);
    }else if(r < 0.9){
        spawnObstacle("https://studymate81.wordpress.com/wp-content/uploads/2026/01/skeleton-get_hit_5.png");
    }else{
        // rare strong attacker (must double jump)
        spawnObstacle("https://studymate81.wordpress.com/wp-content/uploads/2026/01/skeleton-walking_2.png");
    }

    setTimeout(spawnLoop,1500);
}
</script>

</body>
</html>
