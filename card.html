<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Creator Card ‚Äî Fixed Swiper</title>

<style>
/* -------- RESPONSIVE SCALED CARD SIZES -------- */
:root {
  --base-w: 320; /* base card width for scaling */
  --card-width: min(90vw, 320px);
  --scale: calc(var(--card-width) / var(--base-w));
  --card-height: calc(440px * var(--scale));
  --stack-gap-y: calc(14px * var(--scale));
  --stack-gap-z: calc(14px * var(--scale));
  --swap-duration: 300ms;
  font-family: "Poppins", sans-serif;
}

/* -------- GLOBAL -------- */
body{
  margin:0;
  padding:24px 12px;
  background:linear-gradient(135deg,#9be7ff,#59c3ff);
  display:flex;
  justify-content:center;
  font-family:inherit;
  color:#fff;
}

.box {
  width:100%;
  max-width:460px;
  background:rgba(255,255,255,0.05);
  border-radius:20px;
  padding:16px;
  border:1px solid rgba(255,255,255,0.2);
  backdrop-filter:blur(10px);
}

/* Header buttons */
.icon-btn{
  width:40px;height:40px;border-radius:12px;
  background:rgba(255,255,255,0.1);
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;
}

/* CREATOR CARD */
.name-card{
  position:relative;height:220px;margin-top:12px;
  border-radius:14px;overflow:hidden;
}
.name-card img{width:100%;height:100%;object-fit:cover;filter:brightness(.6);}
.card-overlay{position:absolute;inset:0;padding:14px;display:flex;flex-direction:column;justify-content:space-between}

/* avatar */
.avatar{
  width:68px;height:68px;border-radius:12px;overflow:hidden;
  border:2px solid rgba(255,255,255,0.2);
}
.avatar img{width:100%;height:100%;object-fit:cover}

/* SOCIAL ICONS */
.social-row{display:flex;gap:12px}
.social-item{width:60px;text-align:center;position:relative}
.social-btn{
  width:44px;height:44px;border-radius:12px;background:rgba(255,255,255,0.12);
  display:flex;align-items:center;justify-content:center;
}
.social-btn img{width:24px}
.count{margin-top:6px;font-weight:700}
.glow{position:absolute;inset:0;transform:translateY(12px);filter:blur(12px);opacity:.7;z-index:-1}
.yt .glow{background:red}
.ig .glow{background:magenta}
.tw .glow{background:cyan}
.ds .glow{background:purple}

/* TABS */
.tabs{margin-top:16px;display:flex;justify-content:center;gap:14px}
.tab-btn{
  padding:8px 20px;background:rgba(255,255,255,0.12);
  color:#fff;border:0;border-radius:999px;cursor:pointer;
  font-weight:700;
}
.tab-btn.active{background:rgba(255,255,255,0.3)}

/* -------- STACK AREA -------- */
.stack-area{
  margin-top:16px;
  width:100%;
  display:flex;
  justify-content:center;
  overflow:hidden;  /* üí• KEY FIX: prevents overflow */
}

.stack{
  width:var(--card-width);
  height:var(--card-height);
  position:relative;
  perspective:1000px;
  overflow:hidden; /* üí• KEY FIX */
  touch-action:none;
}

/* -------- CARD -------- */
.card{
  --i:1;
  position:absolute;
  width:var(--card-width);
  height:var(--card-height);
  left:50%;top:0;
  border-radius:16px;
  overflow:hidden;
  background:#111;
  box-shadow:0 10px 30px rgba(2,6,23,.45);
  cursor:grab;

  /* scale + keep inside box */
  transform:
    translateX(-50%)
    translateY(calc(var(--i) * var(--stack-gap-y)))
    translateZ(calc(var(--i) * -1 * var(--stack-gap-z)))
    rotate(0deg)
    scale(var(--scale)); /* üí• AUTOMATIC SCALE FIX */
  
  transform-origin:center center;
  transition:transform var(--swap-duration),opacity var(--swap-duration);
}

.card img{
  width:100%;height:100%;object-fit:cover;pointer-events:none;user-select:none;
}

/* while dragging */
.card.is-dragging{cursor:grabbing}

/* swipe transform */
.card[data-swipe-x]{
  transform:
    translateX(calc(-50% + var(--swipe-x)))
    translateY(calc(var(--i) * var(--stack-gap-y)))
    translateZ(calc(var(--i) * -1 * var(--stack-gap-z)))
    rotate(var(--swipe-rotate))
    scale(var(--scale));
}

/* POPUP */
.popup{
  position:fixed;inset:0;background:rgba(0,0,0,.75);
  display:none;justify-content:center;align-items:center;z-index:999;
}
.popup img{
  max-width:92%;max-height:92%;border-radius:16px;
  box-shadow:0 10px 40px rgba(0,0,0,.4);
}

</style>
</head>

<body>

<div class="box">

  <!-- HEADER -->
  <div style="display:flex;justify-content:space-between">
    <div class="icon-btn" onclick="history.back()">‚Üê</div>
    <div class="icon-btn">üë§</div>
  </div>

  <!-- CREATOR CARD -->
  <div class="name-card">
    <img src="https://images.unsplash.com/photo-1503264116251-35a269479413?q=80">
    <div class="card-overlay">
      <div style="display:flex;align-items:center;gap:12px">
        <div class="avatar"><img src="https://i.ibb.co/QD8c0yk/profile.png"></div>
        <div>
          <div style="font-weight:700;font-size:1.1rem">Abhishek Kumar</div>
          <div style="opacity:.9;font-size:.9rem">Creator ‚Ä¢ Tech & Affiliate</div>
        </div>
      </div>

      <div class="social-row">
        <div class="social-item yt">
          <div class="social-btn"><img src="https://cdn-icons-png.flaticon.com/512/1384/1384060.png"></div>
          <div class="glow"></div><div class="count">12.4K</div>
        </div>
        <div class="social-item ig">
          <div class="social-btn"><img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png"></div>
          <div class="glow"></div><div class="count">8.2K</div>
        </div>
        <div class="social-item tw">
          <div class="social-btn"><img src="https://cdn-icons-png.flaticon.com/512/733/733579.png"></div>
          <div class="glow"></div><div class="count">3.5K</div>
        </div>
        <div class="social-item ds">
          <div class="social-btn"><img src="https://cdn-icons-png.flaticon.com/512/5968/5968756.png"></div>
          <div class="glow"></div><div class="count">1.1K</div>
        </div>
      </div>
    </div>
  </div>

  <!-- TABS -->
  <div class="tabs">
    <button class="tab-btn active" data-target="blogs">Blogs</button>
    <button class="tab-btn" data-target="shop">Shop</button>
  </div>

  <!-- STACKS -->
  <div class="stack-area">
    <div id="blogs" class="stack"></div>
    <div id="shop" class="stack" style="display:none"></div>
  </div>

</div>

<!-- POPUP -->
<div id="popup" class="popup" onclick="closePopup()">
  <img id="popupImg">
</div>


<script>
/* ---------- Stack Creator ---------- */
function createStack(id, images){
  const container=document.getElementById(id);
  container.innerHTML="";

  const cards=images.map((src,i)=>{
    const c=document.createElement("div");
    c.className="card";
    c.style.setProperty("--i",i+1);
    c.innerHTML=`<img src="${src}">`;
    container.appendChild(c);
    return c;
  });

  function refresh(){
    [...container.children].forEach((card,idx)=>{
      card.style.setProperty("--i",idx+1);
      card.style.removeProperty("--swipe-x");
      card.style.removeProperty("--swipe-rotate");
      card.style.opacity="1";
    });
  }
  refresh();

  let active=null,dragging=false,startX=0,currentX=0;
  const threshold = window.innerWidth * 0.18;

  function topCard(){ return container.querySelector(".card"); }

  function applyDrag(dx){
    const card=topCard(); if(!card)return;
    card.style.setProperty("--swipe-x",dx+"px");
    card.style.setProperty("--swipe-rotate",(dx*0.12)+"deg");
  }

  function snapBack(){
    const card=topCard(); if(!card)return;
    card.style.transition="transform 250ms,opacity 250ms";
    card.style.removeProperty("--swipe-x");
    card.style.removeProperty("--swipe-rotate");
    setTimeout(()=>card.style.transition="",260);
  }

  function swipeAway(dir){
    const card=topCard(); if(!card)return;
    const off=dir*window.innerWidth*1.4;
    card.style.transition="transform var(--swap-duration),opacity var(--swap-duration)";
    card.style.setProperty("--swipe-x",off+"px");
    card.style.setProperty("--swipe-rotate",dir*30+"deg");
    card.style.opacity="0";

    setTimeout(()=>{
      container.appendChild(card);
      refresh();
    },350);
  }

  function start(e){
    if(dragging)return;
    dragging=true;
    active=topCard(); if(!active)return;

    const x=e.touches?e.touches[0].clientX:e.clientX;
    startX=currentX=x;
    active.style.transition="none";
    active.classList.add("is-dragging");
  }

  function move(e){
    if(!dragging||!active)return;
    const x=e.touches?e.touches[0].clientX:e.clientX;
    currentX=x;
    applyDrag(x-startX);
  }

  function end(){
    if(!dragging||!active)return;
    const dx=currentX-startX;
    dragging=false;
    active.classList.remove("is-dragging");

    if(Math.abs(dx)>threshold) swipeAway(dx>0?1:-1);
    else snapBack();

    active=null;
  }

  container.addEventListener("mousedown",start);
  window.addEventListener("mousemove",move);
  window.addEventListener("mouseup",end);

  container.addEventListener("touchstart",start,{passive:true});
  container.addEventListener("touchmove",move,{passive:true});
  container.addEventListener("touchend",end);

  // popup
  container.addEventListener("click",(e)=>{
    if(dragging)return;
    const card=e.target.closest(".card");
    if(!card)return;
    popupImg.src=card.querySelector("img").src;
    popup.style.display="flex";
  });
}

/* ---------- BLOGS ---------- */
createStack("blogs",[
  "https://picsum.photos/600/800?blog1",
  "https://picsum.photos/600/800?blog2",
  "https://picsum.photos/600/800?blog3",
  "https://picsum.photos/600/800?blog4",
  "https://picsum.photos/600/800?blog5"
]);

/* ---------- SHOP ---------- */
createStack("shop",[
  "https://picsum.photos/600/800?shop1",
  "https://picsum.photos/600/800?shop2",
  "https://picsum.photos/600/800?shop3",
  "https://picsum.photos/600/800?shop4",
  "httpsum.photos/600/800?shop5"
]);

/* ---------- TABS ---------- */
document.querySelectorAll(".tab-btn").forEach(btn=>{
  btn.addEventListener("click",()=>{
    const t=btn.dataset.target;
    document.querySelectorAll(".tab-btn").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");

    blogs.style.display=t==="blogs"?"":"none";
    shop.style.display=t==="shop"?"":"none";
  });
});

/* popup close */
function closePopup(){ popup.style.display="none"; }
</script>

</body>
</html>
